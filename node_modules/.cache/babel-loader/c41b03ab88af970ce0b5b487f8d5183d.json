{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import FormContainer from\"../components/formContainer\";import{Form,Button,Row,Card,Image,Col,ListGroup,ListGroupItem}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import{createOrder}from\"../Actions/orderAction\";import{useNavigate}from\"react-router\";import{Link}from\"react-router-dom\";import CheckOut from\"../components/checkOutComponent\";import Message from\"../components/message\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PlaceOrderScreen=function PlaceOrderScreen(){var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems,shippingAddress=cart.shippingAddress,paymentMethod=cart.paymentMethod;cart.itemsPrice=cartItems.reduce(function(acc,item){return acc+item.price*item.qty;},0);cart.shippingPrice=(cart.itemsPrice>500?0:99).toFixed(2);cart.taxPrice=Number((0.11*cart.itemsPrice).toFixed(2));cart.totalPrice=(Number(cart.itemsPrice)+Number(cart.shippingPrice)+Number(cart.taxPrice)).toFixed(2);var orderCreate=useSelector(function(state){return state.orderCreate;});var error=orderCreate.error,success=orderCreate.success,order=orderCreate.order;var navigate=useNavigate();useEffect(function(){if(success)navigate(\"/order/\".concat(order._id));});var dispatch=useDispatch();var placeOrderHandler=function placeOrderHandler(e){e.preventDefault();dispatch(createOrder({orderItems:cartItems,shippingAddress:shippingAddress,paymentMethod:paymentMethod,itemsPrice:cart.itemsPrice,shippingPrice:cart.shippingPrice,taxPrice:cart.taxPrice,totalPrice:cart.totalPrice}));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CheckOut,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"SHIPPING\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Address: \"}),shippingAddress.address,\",\",shippingAddress.city,\" \",shippingAddress.postalCode,\" \",shippingAddress.country]})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payment Method\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"METHOD:\"}),paymentMethod]})]}),/*#__PURE__*/_jsxs(ListGroupItem,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Order Items\"}),cartItems.length===0?/*#__PURE__*/_jsx(Message,{children:\"Your Cart is Empty\"}):/*#__PURE__*/_jsx(ListGroupItem,{variant:\"flush\",children:cartItems.map(function(item,index){return/*#__PURE__*/_jsx(ListGroupItem,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:4,children:[item.qty,\" x \\u20B9\",item.price,\"= \\u20B9 \",item.qty*item.price]})]})},index);})})]})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroupItem,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Order Summary\"})}),/*#__PURE__*/_jsx(ListGroupItem,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Items\"}),/*#__PURE__*/_jsxs(Col,{children:[\"\\u20B9\",cart.itemsPrice]})]})}),/*#__PURE__*/_jsx(ListGroupItem,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Shipping\"}),/*#__PURE__*/_jsxs(Col,{children:[\"\\u20B9\",cart.shippingPrice]})]})}),/*#__PURE__*/_jsx(ListGroupItem,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Taxes\"}),/*#__PURE__*/_jsxs(Col,{children:[\"\\u20B9\",cart.taxPrice]})]})}),/*#__PURE__*/_jsx(ListGroupItem,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Total Price\"}),/*#__PURE__*/_jsxs(Col,{children:[\"\\u20B9\",cart.totalPrice]})]})}),/*#__PURE__*/_jsx(ListGroupItem,{children:error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error})}),/*#__PURE__*/_jsx(ListGroupItem,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"dark\",disabled:cartItems.length===0,onClick:placeOrderHandler,children:\"PLACE ORDER\"})})]})})})]})]});};export default PlaceOrderScreen;","map":{"version":3,"sources":["C:/Users/Abhishek/Desktop/E-Commerce/frontend/src/Screens/PlaceOrderScreen.js"],"names":["React","useState","useEffect","FormContainer","Form","Button","Row","Card","Image","Col","ListGroup","ListGroupItem","useDispatch","useSelector","createOrder","useNavigate","Link","CheckOut","Message","PlaceOrderScreen","cart","state","cartItems","shippingAddress","paymentMethod","itemsPrice","reduce","acc","item","price","qty","shippingPrice","toFixed","taxPrice","Number","totalPrice","orderCreate","error","success","order","navigate","_id","dispatch","placeOrderHandler","e","preventDefault","orderItems","address","city","postalCode","country","length","map","index","image","name","product"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport FormContainer from \"../components/formContainer\";\r\nimport {\r\n  Form,\r\n  Button,\r\n  Row,\r\n  Card,\r\n  Image,\r\n  Col,\r\n  ListGroup,\r\n  ListGroupItem,\r\n} from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { createOrder } from \"../Actions/orderAction\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\nimport CheckOut from \"../components/checkOutComponent\";\r\nimport Message from \"../components/message\";\r\n\r\nconst PlaceOrderScreen = () => {\r\n  const cart = useSelector((state) => state.cart);\r\n  const { cartItems, shippingAddress, paymentMethod } = cart;\r\n\r\n  cart.itemsPrice = cartItems.reduce(\r\n    (acc, item) => acc + item.price * item.qty,0);\r\n    \r\n  cart.shippingPrice = (cart.itemsPrice > 500 ? 0 : 99).toFixed(2);\r\n  cart.taxPrice = Number((0.11 * cart.itemsPrice).toFixed(2));\r\n\r\n  cart.totalPrice =\r\n   ( Number(cart.itemsPrice) +\r\n    Number(cart.shippingPrice) +\r\n    Number(cart.taxPrice)).toFixed(2);\r\n\r\n  const orderCreate = useSelector((state) => state.orderCreate);\r\n  const { error, success, order } = orderCreate;\r\n  const navigate = useNavigate();\r\n  useEffect(() => {\r\n    if (success) navigate(`/order/${order._id}`);\r\n  });\r\n  const dispatch = useDispatch();\r\n\r\n  const placeOrderHandler = (e) => {\r\n    e.preventDefault();\r\n    dispatch(\r\n      createOrder({\r\n        orderItems: cartItems,\r\n        shippingAddress: shippingAddress,\r\n        paymentMethod: paymentMethod,\r\n        itemsPrice: cart.itemsPrice,\r\n        shippingPrice: cart.shippingPrice,\r\n        taxPrice: cart.taxPrice,\r\n        totalPrice: cart.totalPrice,\r\n      })\r\n    );\r\n  };\r\n  return (\r\n    <>\r\n      <CheckOut step1 step2 step3 step4 />\r\n      <Row>\r\n        <Col md={8}>\r\n          <ListGroup variant=\"flush\">\r\n            <ListGroup.Item>\r\n              <h2>SHIPPING</h2>\r\n              <p>\r\n                <strong>Address: </strong>\r\n                {shippingAddress.address},{shippingAddress.city}{\" \"}\r\n                {shippingAddress.postalCode} {shippingAddress.country}\r\n              </p>\r\n            </ListGroup.Item>\r\n\r\n            <ListGroup.Item>\r\n              <h2>Payment Method</h2>\r\n              <p>\r\n                <strong>METHOD:</strong>\r\n                {paymentMethod}\r\n              </p>\r\n            </ListGroup.Item>\r\n\r\n            <ListGroupItem>\r\n              <h2>Order Items</h2>\r\n              {cartItems.length === 0 ? (\r\n                <Message>Your Cart is Empty</Message>\r\n              ) : (\r\n                <ListGroupItem variant=\"flush\">\r\n                  {cartItems.map((item, index) => (\r\n                    <ListGroupItem key={index}>\r\n                      <Row>\r\n                        <Col md={1}>\r\n                          <Image\r\n                            src={item.image}\r\n                            alt={item.name}\r\n                            fluid\r\n                            rounded\r\n                          ></Image>\r\n                        </Col>\r\n                        <Col>\r\n                          <Link to={`/product/${item.product}`}>\r\n                            {item.name}\r\n                          </Link>\r\n                        </Col>\r\n                        <Col md={4}>\r\n                          {item.qty} x ₹{item.price}= ₹ {item.qty * item.price}\r\n                        </Col>\r\n                      </Row>\r\n                    </ListGroupItem>\r\n                  ))}\r\n                </ListGroupItem>\r\n              )}\r\n            </ListGroupItem>\r\n          </ListGroup>\r\n        </Col>\r\n\r\n        <Col md={4}>\r\n          <Card>\r\n            <ListGroup variant=\"flush\">\r\n              <ListGroupItem>\r\n                <h2>Order Summary</h2>\r\n              </ListGroupItem>\r\n              <ListGroupItem>\r\n                <Row>\r\n                  <Col>Items</Col>\r\n                  <Col>₹{cart.itemsPrice}</Col>\r\n                </Row>\r\n              </ListGroupItem>\r\n              <ListGroupItem>\r\n                <Row>\r\n                  <Col>Shipping</Col>\r\n                  <Col>₹{cart.shippingPrice}</Col>\r\n                </Row>\r\n              </ListGroupItem>\r\n              <ListGroupItem>\r\n                <Row>\r\n                  <Col>Taxes</Col>\r\n                  <Col>₹{cart.taxPrice}</Col>\r\n                </Row>\r\n              </ListGroupItem>\r\n              <ListGroupItem>\r\n                <Row>\r\n                  <Col>Total Price</Col>\r\n                  <Col>₹{cart.totalPrice}</Col>\r\n                </Row>\r\n              </ListGroupItem>\r\n              <ListGroupItem>\r\n                {error && <Message variant=\"danger\">{error}</Message>}\r\n              </ListGroupItem>\r\n              <ListGroupItem>\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"dark\"\r\n                  disabled={cartItems.length === 0}\r\n                  onClick={placeOrderHandler}\r\n                >\r\n                  PLACE ORDER\r\n                </Button>\r\n              </ListGroupItem>\r\n            </ListGroup>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PlaceOrderScreen;\r\n"]},"metadata":{},"sourceType":"module"}