{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abhishek\\\\Desktop\\\\E-Commerce\\\\frontend\\\\src\\\\Screens\\\\OrderScreen.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Loader from \"../components/loader\";\nimport { Form, Button, Row, Card, Image, Col, ListGroup, ListGroupItem } from \"react-bootstrap\";\nimport { PayPalButton } from \"react-paypal-button-v2\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getOrderDetails, payOrder, deliverOrder } from \"../Actions/orderAction\";\nimport { Link, useParams } from \"react-router-dom\";\nimport Message from \"../components/message\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router\";\nimport { ORDER_PAY_RESET, ORDER_DELIVER_RESET } from \"../Constants/orderConstants\";\n\nconst OrderScreen = () => {\n  const {\n    id: orderId\n  } = useParams();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const orderDetails = useSelector(state => state.orderDetails);\n  const {\n    error,\n    loading,\n    order\n  } = orderDetails;\n  const orderPay = useSelector(state => state.orderPay);\n  const {\n    loading: loadingPay,\n    success: successPay\n  } = orderPay;\n  const orderDeliver = useSelector(state => state.orderDeliver);\n  const {\n    loading: loadingDeliver,\n    success: successDeliver\n  } = orderDeliver;\n  const userLogin = useSelector(state => state.userLogin);\n  const {\n    userInfo\n  } = userLogin;\n  const [sdkReady, setSdkReady] = useState(false);\n  useEffect(() => {\n    if (!userInfo) {\n      navigate(`/login`);\n    }\n\n    const addPayPalScript = async () => {\n      const {\n        data: clientId\n      } = await axios.get('/Api/config/paypal');\n      const script = document.createElement('script');\n      script.type = 'text/javascript';\n      script.src = `https://www.paypal.com/sdk/js?client-id=${clientId}`;\n      script.async = true;\n\n      script.onload = () => {\n        setSdkReady(true);\n      };\n\n      document.body.appendChild(script);\n    };\n\n    if (!order || successPay || successDeliver) {\n      dispatch({\n        type: ORDER_PAY_RESET\n      });\n      dispatch({\n        type: ORDER_DELIVER_RESET\n      });\n      dispatch(getOrderDetails(orderId));\n    } else if (!order.isPaid) {\n      if (!window.paypal) {\n        addPayPalScript();\n      } else {\n        setSdkReady(true);\n      }\n    }\n  }, [dispatch, orderId, successPay, order, successDeliver, navigate, userInfo]); // console.log(order);\n\n  const successPaymentHandler = paymentResult => {\n    console.log(paymentResult);\n    dispatch(payOrder(orderId, paymentResult));\n  };\n\n  const razorPayHandler = async amt => {\n    var raz_paymentId = '';\n    var raz_orderId = '';\n    var raz_signature = '';\n    const script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = `https://checkout.razorpay.com/v1/checkout.js`;\n    script.async = true;\n    document.body.appendChild(script);\n    const razdata = await axios.post('/Api/config/razorpay');\n    console.log(razdata);\n    var options = {\n      \"key\": 'rzp_test_NENjtw57a4vV8I',\n      \"amount\": amt * 100,\n      \"currency\": \"INR\",\n      \"name\": \"Buy-Easy Inc.\",\n      \"description\": \"At Buy-Easy we ensure your safety over any thing\",\n      \"image\": \"/android-chrome-192x192.png\",\n      \"order_id\": `${razdata.data.id}`,\n      \"handler\": function async(response) {\n        raz_paymentId = response.razorpay_payment_id;\n        raz_orderId = response.razorpay_order_id;\n        raz_signature = response.razorpay_signature;\n      },\n      \"theme\": {\n        \"color\": \"#3399cc\"\n      }\n    };\n    var rzp1 = new window.Razorpay(options);\n    rzp1.open(); // e.preventDefault();\n\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }; // actual data is not posting\n\n    const resData = await axios.put(`/Api/razorpay/${orderId}/details`, {\n      raz_paymentId,\n      raz_orderId,\n      raz_signature\n    }, config); // console.log(resData);\n  };\n\n  const deliverHandler = () => {\n    dispatch(deliverOrder(order));\n  };\n\n  return loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 5\n    }\n  }) : error ? /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 5\n    }\n  }, error) : /*#__PURE__*/React.createElement(React.Fragment, null, order !== undefined && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }\n  }, \"Order Id\"), \" \", /*#__PURE__*/React.createElement(\"u\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, order._id)), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 19\n    }\n  }, \"Shipping Details\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 21\n    }\n  }, \"Name :\"), order.user.name), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 19\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 21\n    }\n  }, \"Email :\"), /*#__PURE__*/React.createElement(\"a\", {\n    href: `mailto:${order.user.email}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 21\n    }\n  }, order.user.email)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 21\n    }\n  }, \"Address: \"), order.shippingAddress.address, \",\", order.shippingAddress.city, \" \", order.shippingAddress.postalCode, \" \", order.shippingAddress.country), order.isDelivered ? /*#__PURE__*/React.createElement(Message, {\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 21\n    }\n  }, \"Delivered On \", order.deliveredAt) : /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 21\n    }\n  }, \"Not Delivered\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 19\n    }\n  }, \"Payment Method\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 21\n    }\n  }, \"METHOD:\"), order.paymentMethod), order.isPaid ? /*#__PURE__*/React.createElement(Message, {\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 21\n    }\n  }, \"Paid On \", order.paidAt.substring(0, 10)) : /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 21\n    }\n  }, \"Not Paid\")), /*#__PURE__*/React.createElement(ListGroupItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 19\n    }\n  }, \"Order Items\"), order.orderItems.length === 0 ? /*#__PURE__*/React.createElement(Message, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 21\n    }\n  }, \"Order is Empty\") : /*#__PURE__*/React.createElement(ListGroupItem, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 21\n    }\n  }, order.orderItems.map((item, index) => /*#__PURE__*/React.createElement(ListGroupItem, {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: item.image,\n    alt: item.name,\n    fluid: true,\n    rounded: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 31\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/product/${item._id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 31\n    }\n  }, item.name)), /*#__PURE__*/React.createElement(Col, {\n    md: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 29\n    }\n  }, item.qty, \" x \\u20B9\", item.price, \"= \\u20B9\", \" \", item.qty * item.price)))))))), /*#__PURE__*/React.createElement(Col, {\n    md: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ListGroupItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 21\n    }\n  }, \"Order Summary\")), /*#__PURE__*/React.createElement(ListGroupItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 23\n    }\n  }, \"Items\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 23\n    }\n  }, \"\\u20B9\", order.itemsPrice))), /*#__PURE__*/React.createElement(ListGroupItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 23\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 23\n    }\n  }, \"\\u20B9\", order.shippingPrice))), /*#__PURE__*/React.createElement(ListGroupItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 23\n    }\n  }, \"Taxes\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 23\n    }\n  }, \"\\u20B9\", order.taxPrice))), /*#__PURE__*/React.createElement(ListGroupItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 23\n    }\n  }, \"Total Price\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 23\n    }\n  }, \"\\u20B9\", order.totalPrice))), !order.isPaid && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ListGroupItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 21\n    }\n  }, loadingPay && /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 36\n    }\n  }), !sdkReady ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 34\n    }\n  }) : /*#__PURE__*/React.createElement(PayPalButton, {\n    amount: order.totalPrice,\n    onSuccess: successPaymentHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 28\n    }\n  })), /*#__PURE__*/React.createElement(ListGroupItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"dark\",\n    type: \"button\",\n    onClick: () => razorPayHandler(order.totalPrice),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 23\n    }\n  }, \"PAY WITH RAZORPAY\"))), userInfo && userInfo.isAdmin && order.isPaid && !order.isDelivered && /*#__PURE__*/React.createElement(ListGroupItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    variant: \"dark\",\n    className: \"btn btn-block\",\n    onClick: deliverHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 24\n    }\n  }, \"Mark as Delivered\"))))))));\n};\n\nexport default OrderScreen;","map":{"version":3,"sources":["C:/Users/Abhishek/Desktop/E-Commerce/frontend/src/Screens/OrderScreen.js"],"names":["React","useState","useEffect","Loader","Form","Button","Row","Card","Image","Col","ListGroup","ListGroupItem","PayPalButton","useDispatch","useSelector","getOrderDetails","payOrder","deliverOrder","Link","useParams","Message","axios","useNavigate","ORDER_PAY_RESET","ORDER_DELIVER_RESET","OrderScreen","id","orderId","dispatch","navigate","orderDetails","state","error","loading","order","orderPay","loadingPay","success","successPay","orderDeliver","loadingDeliver","successDeliver","userLogin","userInfo","sdkReady","setSdkReady","addPayPalScript","data","clientId","get","script","document","createElement","type","src","async","onload","body","appendChild","isPaid","window","paypal","successPaymentHandler","paymentResult","console","log","razorPayHandler","amt","raz_paymentId","raz_orderId","raz_signature","razdata","post","options","response","razorpay_payment_id","razorpay_order_id","razorpay_signature","rzp1","Razorpay","open","config","headers","resData","put","deliverHandler","undefined","_id","user","name","email","shippingAddress","address","city","postalCode","country","isDelivered","deliveredAt","paymentMethod","paidAt","substring","orderItems","length","map","item","index","image","qty","price","itemsPrice","shippingPrice","taxPrice","totalPrice","isAdmin"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Loader from \"../components/loader\";\r\nimport {\r\n  Form,\r\n  Button,\r\n  Row,\r\n  Card,\r\n  Image,\r\n  Col,\r\n  ListGroup,\r\n  ListGroupItem,\r\n} from \"react-bootstrap\";\r\nimport { PayPalButton } from \"react-paypal-button-v2\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getOrderDetails, payOrder ,deliverOrder} from \"../Actions/orderAction\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport Message from \"../components/message\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { ORDER_PAY_RESET,ORDER_DELIVER_RESET } from \"../Constants/orderConstants\";\r\n\r\nconst OrderScreen =  () => {\r\n\r\n\r\n\r\n  const { id: orderId } = useParams();\r\n  const dispatch = useDispatch();\r\n  const navigate=useNavigate()\r\n\r\n  const orderDetails = useSelector((state) => state.orderDetails);\r\n  const { error, loading, order } = orderDetails;\r\n\r\n  const orderPay = useSelector((state) => state.orderPay);\r\n  const {loading:loadingPay, success:successPay } = orderPay;\r\n\r\n  const orderDeliver = useSelector((state) => state.orderDeliver);\r\n  const {loading:loadingDeliver, success:successDeliver } = orderDeliver;\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n\r\n   const [sdkReady,setSdkReady]=useState(false)\r\n  useEffect(() => {\r\n     if(!userInfo){\r\n       navigate(`/login`)\r\n     }\r\n\r\n    const addPayPalScript=async()=>{\r\n      const{data:clientId}=await axios.get('/Api/config/paypal')\r\n      const script=document.createElement('script')\r\n      script.type='text/javascript'\r\n      script.src=`https://www.paypal.com/sdk/js?client-id=${clientId}`\r\n      script.async=true\r\n      script.onload=()=>{\r\n        setSdkReady(true)\r\n      }\r\n     document.body.appendChild(script)\r\n\r\n    }\r\n    if(!order || successPay||successDeliver){\r\n      dispatch({type:ORDER_PAY_RESET})\r\n      dispatch({type:ORDER_DELIVER_RESET})\r\n      dispatch(getOrderDetails(orderId))\r\n    }else if(!order.isPaid) {\r\n        if(!window.paypal){\r\n          addPayPalScript()\r\n        }else{\r\n          setSdkReady(true)\r\n        }\r\n    }\r\n    }, [dispatch,orderId,successPay,order,successDeliver,navigate,userInfo]);\r\n\r\n\r\n\r\n  // console.log(order);\r\n\r\n  const successPaymentHandler=(paymentResult)=>{\r\n        console.log(paymentResult);\r\n        dispatch(payOrder(orderId,paymentResult))\r\n  }\r\n  \r\n\r\n  \r\n\r\n     const razorPayHandler=async(amt)=>{\r\n\r\n      var raz_paymentId =''\r\n      var raz_orderId=''\r\n      var raz_signature=''\r\n           \r\n      const script=document.createElement('script')\r\n      script.type='text/javascript'\r\n      script.src=`https://checkout.razorpay.com/v1/checkout.js`\r\n      script.async=true\r\n     document.body.appendChild(script)\r\n\r\n     const razdata= await axios.post('/Api/config/razorpay')\r\n          console.log(razdata)\r\n     var options = {\r\n      \"key\": 'rzp_test_NENjtw57a4vV8I', \r\n      \"amount\": amt*100, \r\n      \r\n      \"currency\": \"INR\",\r\n      \"name\": \"Buy-Easy Inc.\",\r\n      \"description\": \"At Buy-Easy we ensure your safety over any thing\",\r\n      \"image\": \"/android-chrome-192x192.png\",\r\n      \"order_id\": `${razdata.data.id}`, \r\n      \"handler\": function async(response){\r\n           raz_paymentId=response.razorpay_payment_id\r\n           raz_orderId=response.razorpay_order_id\r\n           raz_signature=response.razorpay_signature\r\n          },\r\n      \"theme\": {\r\n          \"color\": \"#3399cc\"\r\n      }\r\n  };\r\n        \r\n  var rzp1 = new window.Razorpay(options);\r\n  rzp1.open();\r\n  // e.preventDefault();\r\n  const config={\r\n    headers:{\r\n       'Content-Type':'application/json',    \r\n    },\r\n}\r\n\r\n// actual data is not posting\r\n    const resData=await axios.put(`/Api/razorpay/${orderId}/details`,{raz_paymentId,raz_orderId,raz_signature},config)\r\n  \r\n    // console.log(resData);\r\n  }\r\n     \r\n\r\n\r\n  const deliverHandler=()=>{\r\n    \r\n    dispatch(deliverOrder(order))\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  return loading ? (\r\n    <Loader />\r\n  ) : error ? (\r\n    <Message variant=\"danger\">{error}</Message>\r\n  ) : (\r\n    <>\r\n      {order !== undefined && (\r\n        <>\r\n          <h2>Order Id</h2>{\" \"}\r\n          <u>\r\n            <h5>{order._id}</h5>\r\n          </u>\r\n          {/*❤ error can occur*/}\r\n          <Row>\r\n            <Col md={8}>\r\n              <ListGroup variant=\"flush\">\r\n                <ListGroup.Item>\r\n                  <h2>Shipping Details</h2>\r\n                  <p>\r\n                    <strong>Name :</strong>\r\n                    {order.user.name}\r\n                  </p>\r\n                  <p>\r\n                    {\" \"}\r\n                    <strong>Email :</strong>\r\n                    <a href={`mailto:${order.user.email}`}>\r\n                      {order.user.email}\r\n                    </a>\r\n                  </p>\r\n                  <p>\r\n                    <strong>Address: </strong>\r\n                    {order.shippingAddress.address},{order.shippingAddress.city}{\" \"}\r\n                    {order.shippingAddress.postalCode}{\" \"}\r\n                    {order.shippingAddress.country}\r\n                  </p>\r\n                  {order.isDelivered ? (\r\n                    <Message variant=\"success\">\r\n                      Delivered On {order.deliveredAt}\r\n                    </Message>\r\n                  ) : (\r\n                    <Message variant=\"danger\">Not Delivered</Message>\r\n                  )}\r\n                </ListGroup.Item>\r\n\r\n                <ListGroup.Item>\r\n                  <h2>Payment Method</h2>\r\n                  <p>\r\n                    <strong>METHOD:</strong>\r\n                    {order.paymentMethod}\r\n                  </p>\r\n                  {order.isPaid ? (\r\n                    <Message variant=\"success\">Paid On {order.paidAt.substring(0,10)}</Message>\r\n                  ) : (\r\n                    <Message variant=\"danger\">Not Paid</Message>\r\n                  )}\r\n                </ListGroup.Item>\r\n\r\n                <ListGroupItem>\r\n                  <h2>Order Items</h2>\r\n                  {order.orderItems.length === 0 ? (\r\n                    <Message>Order is Empty</Message>\r\n                  ) : (\r\n                    <ListGroupItem variant=\"flush\">\r\n                      {order.orderItems.map((item, index) => (\r\n                        <ListGroupItem key={index}>\r\n                          <Row>\r\n                            <Col md={1}>\r\n                              <Image\r\n                                src={item.image}\r\n                                alt={item.name}\r\n                                fluid\r\n                                rounded\r\n                              ></Image>\r\n                            </Col>\r\n                            <Col>\r\n                              <Link to={`/product/${item._id}`}>\r\n                                {item.name}\r\n                              </Link>\r\n                            </Col>\r\n                            <Col md={4}>\r\n                              {item.qty} x ₹{item.price}= ₹{\" \"}\r\n                              {item.qty * item.price}\r\n                            </Col>\r\n                          </Row>\r\n                        </ListGroupItem>\r\n                      ))}\r\n                    </ListGroupItem>\r\n                  )}\r\n                </ListGroupItem>\r\n              </ListGroup>\r\n            </Col>\r\n\r\n            <Col md={4}>\r\n              <Card>\r\n                <ListGroup variant=\"flush\">\r\n                  <ListGroupItem>\r\n                    <h2>Order Summary</h2>\r\n                  </ListGroupItem>\r\n                  <ListGroupItem>\r\n                    <Row>\r\n                      <Col>Items</Col>\r\n                      <Col>₹{order.itemsPrice}</Col>\r\n                    </Row>\r\n                  </ListGroupItem>\r\n                  <ListGroupItem>\r\n                    <Row>\r\n                      <Col>Shipping</Col>\r\n                      <Col>₹{order.shippingPrice}</Col>\r\n                    </Row>\r\n                  </ListGroupItem>\r\n                  <ListGroupItem>\r\n                    <Row>\r\n                      <Col>Taxes</Col>\r\n                      <Col>₹{order.taxPrice}</Col>\r\n                    </Row>\r\n                  </ListGroupItem>\r\n                  <ListGroupItem>\r\n                    <Row>\r\n                      <Col>Total Price</Col>\r\n                      <Col>₹{order.totalPrice}</Col>\r\n                    </Row>\r\n                  </ListGroupItem>\r\n                  {!order.isPaid &&(\r\n                    <>\r\n                    <ListGroupItem>\r\n                      {loadingPay&&<Loader/>}\r\n                      {!sdkReady?<Loader/>:(\r\n                           <PayPalButton amount={order.totalPrice} onSuccess={successPaymentHandler}/> \r\n                      )}                    \r\n                    </ListGroupItem>\r\n                     \r\n                    <ListGroupItem>\r\n                      <Button variant='dark' type='button' onClick={()=>razorPayHandler(order.totalPrice)}>PAY WITH RAZORPAY</Button>\r\n                    </ListGroupItem>\r\n                    \r\n                  \r\n                    </>\r\n            \r\n                     )}     \r\n                      {userInfo&&userInfo.isAdmin && order.isPaid && !order.isDelivered&&(\r\n                     <ListGroupItem>\r\n                       <Button type='button' variant='dark' className='btn btn-block' onClick={deliverHandler}>Mark as Delivered</Button>\r\n                     </ListGroupItem>\r\n                   )}             \r\n                </ListGroup>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrderScreen;\r\n"]},"metadata":{},"sourceType":"module"}